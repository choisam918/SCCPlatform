<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="æ•¸å­¸å››å‰‡é‹ç®—ç·´ç¿’">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#1e3c72">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <title>å°å­¸æ•¸å­¸å››å‰‡é‹ç®—ç·´ç¿’</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
                <header>
            <h1>ğŸ¯ æ•¸å­¸å››å‰‡é‹ç®—ç·´ç¿’</h1>
            <button id="admin-login-btn" class="btn-admin">
              <span class="admin-icon">âš™ï¸</span>
              <span class="admin-text">ç®¡ç†ç™»å…¥</span>
            </button>
            <div class="progress-info">
                <div class="progress-card">
                    <div class="progress-label">å¾—åˆ†</div>
                    <div class="progress-value" id="score">0</div>
                </div>
                <div class="progress-card">
                    <div class="progress-label">é€£çºŒæ­£ç¢º</div>
                    <div class="progress-value" id="streak">0</div>
                </div>
            </div>
        </header>

        <div id="level-select" class="level-select fullscreen-select">
            <div class="fullscreen-container">
                <div class="fullscreen-header">
                    <h2>ğŸ¯ æ•¸å­¸å››å‰‡é‹ç®—ç·´ç¿’</h2>
                    <p class="subtitle">é¸æ“‡æ‚¨æƒ³è¦ç·´ç¿’çš„æ•¸å­¸é¡å‹</p>
                </div>
                
                <div class="fullscreen-grid">
                    <!-- åŠ æ¸›æ³•ç·´ç¿’ -->
                    <div class="fullscreen-card addition" data-category="addition-subtraction-100">
                        <div class="card-icon">â•â–</div>
                        <h3>ç™¾ä½æ•¸åŠ æ¸›</h3>
                    </div>
                    
                    <div class="fullscreen-card addition" data-category="addition-subtraction-1000">
                        <div class="card-icon">â•â–</div>
                        <h3>åƒä½æ•¸åŠ æ¸›</h3>
                    </div>
                    
                    <!-- ä¹˜é™¤æ³•ç·´ç¿’ -->
                    <div class="fullscreen-card multiply" data-category="multiplication-division-ones">
                        <div class="card-icon">âœ–ï¸â—</div>
                        <h3>å€‹ä½æ•¸ä¹˜é™¤</h3>
                    </div>
                    
                    <div class="fullscreen-card multiply" data-category="multiplication-division-tens">
                        <div class="card-icon">âœ–ï¸â—</div>
                        <h3>åä½æ•¸ä¹˜é™¤</h3>
                    </div>
                    
                    <!-- å››å‰‡é‹ç®—ç·´ç¿’ -->
                    <div class="fullscreen-card mixed" data-category="mixed-ones">
                        <div class="card-icon">ğŸ¯</div>
                        <h3>å€‹ä½æ•¸å››å‰‡</h3>
                    </div>
                    
                    <div class="fullscreen-card mixed" data-category="mixed-tens">
                        <div class="card-icon">ğŸ¯</div>
                        <h3>åä½æ•¸å››å‰‡</h3>
                    </div>
                    
                    <div class="fullscreen-card mixed" data-category="mixed-hundreds">
                        <div class="card-icon">ğŸ¯</div>
                        <h3>ç™¾ä½æ•¸å››å‰‡</h3>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-area" class="game-area hidden">
            <div class="question-container">
                <div class="question">
                    <span id="num1">5</span>
                    <span id="operator">+</span>
                    <span id="num2">3</span>
                    <span>=</span>
                    <input type="number" id="answer" placeholder="?" autocomplete="off">
                </div>
            </div>

            <div class="controls">
                <button id="submit-btn" class="btn btn-primary">æäº¤ç­”æ¡ˆ</button>
                <button id="skip-btn" class="btn btn-secondary">è·³é</button>
                <button id="back-btn" class="btn btn-secondary">è¿”å›é¸å–®</button>
                <button id="back-to-mult-mode" class="btn btn-secondary hidden">è¿”å›åˆ°é¸æ“‡è¦ç·´ç¿’çš„ä¹˜æ•¸</button>
            </div>

            <div class="feedback hidden" id="feedback">
                <div class="feedback-content">
                    <span id="feedback-text"></span>
                    <button id="next-btn" class="btn btn-primary">ä¸‹ä¸€é¡Œ</button>
                </div>
            </div>

            <div class="timer">
                <div class="timer-bar">
                    <div id="timer-fill" class="timer-fill"></div>
                </div>
                <span id="time-left">60</span>ç§’
                <button id="pause-btn" class="btn btn-secondary pause-btn">æš«åœ</button>
                <button id="resume-btn" class="btn btn-primary resume-btn">ç¹¼çºŒ</button>
            </div>
        </div>

        <div id="level-complete" class="level-complete hidden">
            <div class="complete-content">
                <h2>ğŸ‰ ç·´ç¿’å®Œæˆï¼</h2>
                <div class="stats">
                    <p>æ­£ç¢ºç­”æ¡ˆ: <span id="correct-count">0</span></p>
                    <p>ç¸½é¡Œæ•¸: <span id="total-count">0</span></p>
                    <p>æº–ç¢ºç‡: <span id="accuracy">0%</span></p>
                </div>
                <div class="buttons">
                    <button id="next-level-btn" class="btn btn-primary">ç¹¼çºŒç·´ç¿’</button>
                    <button id="retry-btn" class="btn btn-secondary">é‡æ–°æŒ‘æˆ°</button>
                    <button id="menu-btn" class="btn btn-secondary">è¿”å›é¸å–®</button>
                </div>
            </div>
        </div>
    </div>


    <script src="script.js"></script>
    <script>
        // è¿”å›ä¸»ç³»ç»ŸæŒ‰é’®åŠŸèƒ½
        (function() {
            'use strict';
            
            // åˆ›å»ºè¿”å›ä¸»ç³»ç»ŸæŒ‰é’®çš„æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .back-to-main-btn {
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    z-index: 9999;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border: none;
                    border-radius: 50px;
                    padding: 12px 20px;
                    font-size: 14px;
                    font-weight: 600;
                    cursor: pointer;
                    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    backdrop-filter: blur(10px);
                    border: 2px solid rgba(255, 255, 255, 0.2);
                }
                
                .back-to-main-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
                    background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
                }
                
                .back-to-main-btn:active {
                    transform: translateY(0);
                }
                
                .back-to-main-btn .icon {
                    font-size: 16px;
                }
                
                /* å“åº”å¼è®¾è®¡ */
                @media (max-width: 768px) {
                    .back-to-main-btn {
                        top: 15px;
                        left: 15px;
                        padding: 10px 16px;
                        font-size: 12px;
                    }
                    
                    .back-to-main-btn .icon {
                        font-size: 14px;
                    }
                }
                
                @media (max-width: 480px) {
                    .back-to-main-btn {
                        top: 10px;
                        left: 10px;
                        padding: 8px 12px;
                        font-size: 11px;
                    }
                    
                    .back-to-main-btn .icon {
                        font-size: 12px;
                    }
                }
                
                .pause-btn, .resume-btn {
                    margin-left: 16px;
                }
                
                .resume-btn {
                    display: none;
                }
            `;
            
            // æ·»åŠ æ ·å¼åˆ°é¡µé¢
            document.head.appendChild(style);
            
            // åˆ›å»ºè¿”å›ä¸»ç³»ç»ŸæŒ‰é’®
            function createBackButton() {
                const button = document.createElement('button');
                button.className = 'back-to-main-btn';
                button.innerHTML = '<span class="icon">ğŸ </span>è¿”å›ä¸»ç³»çµ±';
                button.title = 'è¿”å›ä¸»ç³»ç»Ÿ';
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                button.addEventListener('click', function() {
                    // å°è¯•å¤šç§æ–¹å¼è¿”å›ä¸»ç³»ç»Ÿ
                    if (window.parent && window.parent !== window) {
                        // å¦‚æœåœ¨iframeä¸­ï¼Œé€šçŸ¥çˆ¶çª—å£
                        window.parent.postMessage({ action: 'backToMain' }, '*');
                    } else if (window.opener) {
                        // å¦‚æœæ˜¯é€šè¿‡window.openæ‰“å¼€çš„ï¼Œå…³é—­å½“å‰çª—å£
                        window.close();
                    } else {
                        // ç›´æ¥è·³è½¬åˆ°ä¸»ç³»ç»Ÿ
                        window.location.href = '../index.html';
                    }
                });
                
                return button;
            }
            
            // ç­‰å¾…DOMåŠ è½½å®Œæˆåæ·»åŠ æŒ‰é’®
            function initBackButton() {
                // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨è¿”å›æŒ‰é’®
                if (document.querySelector('.back-to-main-btn')) {
                    return;
                }
                
                const button = createBackButton();
                document.body.appendChild(button);
                
                // ç›‘å¬æ¥è‡ªçˆ¶çª—å£çš„æ¶ˆæ¯
                window.addEventListener('message', function(event) {
                    if (event.data && event.data.action === 'backToMain') {
                        window.location.href = '../index.html';
                    }
                });
            }
            
            // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initBackButton);
            } else {
                initBackButton();
            }
        })();
    </script>
    <script>
    document.getElementById('admin-login-btn').onclick = function() {
        window.location.href = 'admin.html';
    };
    </script>
</body>
</html> 