# Pyodide 載入問題排除指南

## 🔍 問題：載入沒有反應

如果看到「正在載入 Python 執行環境...」但一直沒有反應，請按照以下步驟排查：

## 步驟 1：檢查瀏覽器控制台

1. **按 F12 打開開發者工具**
2. **切換到 Console（控制台）標籤**
3. **查看是否有紅色錯誤訊息**

### 常見錯誤訊息：

#### ❌ "Pyodide 腳本未載入"
**原因**：Pyodide.js 文件無法從 CDN 下載

**解決方案**：
- 檢查網路連線
- 確認可以訪問 `cdn.jsdelivr.net`
- 檢查是否有防火牆或代理阻擋
- 嘗試重新整理頁面（Ctrl+F5）

#### ❌ "Failed to fetch" 或 "Network error"
**原因**：網路連接問題

**解決方案**：
- 檢查網路連線
- 嘗試重新整理頁面
- 檢查代理設定

#### ❌ "WebAssembly is not defined"
**原因**：瀏覽器不支援 WebAssembly

**解決方案**：
- 更新瀏覽器到最新版本
- 使用 Chrome、Firefox、Safari 或 Edge

## 步驟 2：檢查網路標籤

1. **在開發者工具中切換到 Network（網路）標籤**
2. **重新整理頁面**
3. **搜尋 "pyodide"**
4. **查看 pyodide.js 的載入狀態**

### 狀態說明：

- ✅ **200 OK**：腳本成功載入
- ❌ **404 Not Found**：CDN 無法訪問
- ❌ **Failed**：網路錯誤
- ⏳ **Pending**：正在載入（如果一直卡在這裡，可能是網路問題）

## 步驟 3：檢查網路診斷

系統會自動執行網路診斷，檢查結果會顯示在控制台：

```
🔍 網路診斷資訊
  Pyodide 腳本: ✓ 已載入 / ❌ 未載入
  網路狀態: ✓ 在線 / ❌ 離線
  WebAssembly 支援: ✓ 支援 / ❌ 不支援
```

## 步驟 4：手動測試 CDN 連接

在瀏覽器地址欄輸入以下網址，確認可以訪問：

```
https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js
```

如果無法訪問，可能是：
- 網路連線問題
- 防火牆阻擋
- CDN 暫時無法訪問

## 步驟 5：檢查瀏覽器設定

### 檢查項目：

1. **廣告攔截器**
   - 某些廣告攔截器可能會阻擋 CDN
   - 嘗試暫時關閉廣告攔截器

2. **擴充功能**
   - 某些擴充功能可能影響腳本載入
   - 嘗試在無痕模式下測試

3. **代理設定**
   - 檢查代理設定是否正確
   - 確認代理允許訪問 CDN

## 步驟 6：嘗試解決方案

### 方案 A：重新整理頁面
- 按 **Ctrl+F5**（Windows）或 **Cmd+Shift+R**（Mac）強制重新整理
- 清除快取後重新載入

### 方案 B：檢查網路連線
- 確認網路連線正常
- 嘗試訪問其他網站確認網路可用
- 如果使用 VPN，嘗試關閉或切換節點

### 方案 C：更換瀏覽器
- 嘗試使用不同的瀏覽器
- 推薦：Chrome、Firefox、Safari、Edge 最新版本

### 方案 D：檢查防火牆
- 確認防火牆允許訪問 `cdn.jsdelivr.net`
- 檢查公司或學校的網路是否阻擋 CDN

## 步驟 7：查看詳細錯誤

如果問題仍然存在，請：

1. **打開瀏覽器控制台（F12）**
2. **複製所有錯誤訊息**
3. **查看 Network 標籤中的詳細資訊**
4. **記錄以下資訊**：
   - 錯誤訊息
   - 瀏覽器版本
   - 作業系統
   - 網路狀態

## 🔧 技術細節

### Pyodide 載入過程：

1. **載入腳本**：從 CDN 下載 `pyodide.js`（約 2MB）
2. **初始化環境**：載入 Python 執行環境（約 10MB）
3. **準備就緒**：環境準備完成，可以執行程式碼

### 預期時間：

- **正常網路**：10-30 秒
- **慢速網路**：30-60 秒
- **超時限制**：2 分鐘（超過會顯示錯誤）

## ⚠️ 已知限制

1. **需要網路連線**：Pyodide 必須從 CDN 下載
2. **首次載入較慢**：需要下載約 10MB 的檔案
3. **某些環境不支援**：
   - 離線環境
   - 受限的網路環境
   - 不支援 WebAssembly 的瀏覽器

## 💡 建議

如果持續無法載入，可以考慮：

1. **使用本地部署**：下載 Pyodide 到本地伺服器
2. **使用替代 CDN**：如果 jsdelivr 無法訪問，可以嘗試其他 CDN
3. **聯繫管理員**：如果是公司或學校網路，可能需要管理員協助

---

**提示**：如果問題仍然存在，請提供瀏覽器控制台的錯誤訊息，以便進一步診斷。
