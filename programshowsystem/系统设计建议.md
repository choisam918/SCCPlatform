# 程式展示系統 - 整體設計建議

## 一、系統概述

這是一個用於教師收集學生Python作業並以HTML方式展示的系統。主要功能包括：
- 學生上傳Python檔案
- 教師收集和管理學生檔案
- 以HTML格式展示所有收集的Python程式碼

## 二、系統架構設計

### 2.1 整體架構
```
┌─────────────┐
│  前端介面    │  (HTML/CSS/JavaScript)
│  (教師端)    │
└──────┬──────┘
       │
┌──────▼──────┐
│  後端服務    │  (Python Flask/FastAPI 或 Node.js)
│  (API層)     │
└──────┬──────┘
       │
┌──────▼──────┐
│  檔案管理    │  (檔案系統或資料庫)
│  (儲存層)    │
└─────────────┘
```

### 2.2 三種實現方案

#### 方案A：純前端方案（最簡單）
- **技術棧**：HTML + CSS + JavaScript (Vanilla JS 或 Vue.js/React)
- **檔案上傳**：使用 `<input type="file" multiple>` 或拖放上傳
- **檔案處理**：在瀏覽器端使用 FileReader API 讀取檔案
- **優點**：無需後端，部署簡單，可直接用瀏覽器開啟
- **缺點**：檔案只存在瀏覽器，無法持久化儲存

#### 方案B：輕量後端方案（推薦）
- **技術棧**：
  - 前端：HTML + CSS + JavaScript
  - 後端：Python Flask（輕量級，易於部署）
- **檔案儲存**：本地檔案系統（`uploads/` 目錄）
- **優點**：功能完整，可持久化儲存，易於擴展
- **缺點**：需要運行後端服務

#### 方案C：完整Web應用方案
- **技術棧**：
  - 前端：現代框架（Vue.js/React）
  - 後端：Python Flask/FastAPI
  - 資料庫：SQLite（輕量）或 PostgreSQL（完整）
- **檔案儲存**：資料庫 + 檔案系統
- **優點**：功能最完整，可擴展性強，支援多用戶
- **缺點**：開發複雜度高

## 三、功能模組設計

### 3.1 核心功能模組

#### 模組1：檔案上傳模組
- **功能**：允許教師上傳多個Python檔案
- **實現方式**：
  - 支援單檔/多檔上傳
  - 支援拖放上傳
  - 檔案驗證（檢查是否為.py檔案）
  - 顯示上傳進度

#### 模組2：檔案管理模組
- **功能**：管理已上傳的檔案
- **實現方式**：
  - 檔案列表顯示（檔名、上傳時間、檔案大小）
  - 檔案預覽
  - 檔案刪除
  - 檔案重新命名（可選）

#### 模組3：程式碼展示模組
- **功能**：將收集的Python檔案以HTML格式展示
- **實現方式**：
  - 程式碼高亮顯示（使用 highlight.js 或 Prism.js）
  - 檔案分組/分類顯示
  - 可折疊/展開的程式碼區塊
  - 行號顯示
  - 搜尋功能（可選）

#### 模組4：匯出模組（可選）
- **功能**：將展示結果匯出
- **實現方式**：
  - 匯出為單一HTML檔案
  - 匯出為PDF（可選）
  - 列印功能

### 3.2 輔助功能模組

#### 模組5：檔案解析模組
- **功能**：解析Python檔案內容
- **實現方式**：
  - 提取檔案名稱、行數、檔案大小
  - 提取註解、函數名稱（可選）
  - 語法檢查（可選）

#### 模組6：樣式主題模組
- **功能**：提供多種展示樣式
- **實現方式**：
  - 深色/淺色主題切換
  - 多種程式碼高亮主題
  - 自訂樣式選項

## 四、資料流程設計

### 4.1 檔案上傳流程
```
教師選擇檔案
    ↓
前端驗證（.py檔案）
    ↓
上傳至後端
    ↓
後端儲存至 uploads/ 目錄
    ↓
返回檔案資訊給前端
    ↓
更新檔案列表
```

### 4.2 展示生成流程
```
教師點擊「生成展示」
    ↓
後端讀取 uploads/ 目錄所有檔案
    ↓
解析每個Python檔案內容
    ↓
套用程式碼高亮
    ↓
生成HTML結構
    ↓
返回給前端顯示
```

## 五、目錄結構建議

### 5.1 方案B（推薦）的目錄結構
```
programshowsystem/
├── app.py                 # Flask主程式
├── templates/             # HTML模板
│   ├── index.html        # 主頁面（上傳介面）
│   └── display.html      # 展示頁面
├── static/               # 靜態資源
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── main.js
│   └── lib/              # 第三方庫
│       └── highlight.js  # 程式碼高亮
├── uploads/              # 上傳的檔案儲存目錄
│   └── .gitkeep
├── requirements.txt       # Python依賴
└── README.md             # 說明文件
```

### 5.2 方案A（純前端）的目錄結構（GitHub Pages推薦）
```
programshowsystem/
├── .github/
│   └── workflows/        # GitHub Actions（可選）
├── docs/                 # 文檔目錄
│   ├── 系統設計建議.md
│   ├── 方案對比表.md
│   └── GitHub部署方案.md
├── index.html            # 主頁面
├── display.html          # 展示頁面
├── css/
│   └── style.css
├── js/
│   ├── main.js
│   ├── fileHandler.js    # 檔案處理
│   └── storage.js        # LocalStorage管理
├── lib/                  # 第三方庫
│   └── highlight.js/
├── .gitignore
└── README.md
```

## 六、使用者介面設計建議

### 6.1 主頁面（上傳介面）
```
┌─────────────────────────────────────┐
│  程式展示系統                        │
├─────────────────────────────────────┤
│                                     │
│  ┌───────────────────────────────┐ │
│  │  拖放檔案到此處或點擊選擇檔案   │ │
│  │  (支援多檔上傳)                │ │
│  └───────────────────────────────┘ │
│                                     │
│  已上傳檔案列表：                    │
│  ┌───────────────────────────────┐ │
│  │ ☑ student1.py  [預覽] [刪除]  │ │
│  │ ☑ student2.py  [預覽] [刪除]  │ │
│  │ ☑ student3.py  [預覽] [刪除]  │ │
│  └───────────────────────────────┘ │
│                                     │
│  [生成展示] [清除全部] [匯出HTML]   │
│                                     │
└─────────────────────────────────────┘
```

### 6.2 展示頁面
```
┌─────────────────────────────────────┐
│  程式展示系統 - 展示頁面            │
├─────────────────────────────────────┤
│  [返回] [列印] [匯出] [主題切換]    │
├─────────────────────────────────────┤
│                                     │
│  ┌─ student1.py ─────────────────┐ │
│  │ 1 │ def hello():              │ │
│  │ 2 │     print("Hello")        │ │
│  │ 3 │                           │ │
│  └───────────────────────────────┘ │
│                                     │
│  ┌─ student2.py ─────────────────┐ │
│  │ 1 │ class Student:            │ │
│  │ 2 │     def __init__(self):   │ │
│  │ 3 │         pass              │ │
│  └───────────────────────────────┘ │
│                                     │
└─────────────────────────────────────┘
```

## 七、技術選型建議

### 7.1 前端技術
- **HTML5**：語義化標籤
- **CSS3**：Flexbox/Grid 佈局，響應式設計
- **JavaScript (ES6+)**：模組化開發
- **程式碼高亮庫**：
  - highlight.js（推薦，輕量且功能完整）
  - Prism.js（替代方案）

### 7.2 後端技術（方案B/C）
- **Python Flask**：
  - 輕量級，易於學習
  - 豐富的擴展生態
  - 適合快速開發
- **檔案處理**：
  - `os` 模組處理檔案系統
  - `shutil` 處理檔案操作

### 7.3 安全性考量
- 檔案類型驗證（只允許.py檔案）
- 檔案大小限制
- 檔案名稱清理（防止路徑遍歷攻擊）
- 上傳檔案數量限制

## 八、擴展功能建議（未來可加）

1. **學生資訊管理**：關聯學生姓名、學號
2. **評分功能**：教師可對每個檔案評分
3. **註解功能**：教師可在程式碼上添加註解
4. **版本管理**：支援同一學生多次提交
5. **批量下載**：下載所有學生檔案
6. **統計功能**：顯示提交率、檔案統計
7. **搜尋功能**：在程式碼中搜尋關鍵字
8. **比較功能**：並排比較兩個檔案

## 九、開發階段建議

### 階段1：MVP（最小可行產品）
- 基本檔案上傳
- 簡單的HTML展示
- 程式碼高亮

### 階段2：功能完善
- 檔案管理（刪除、預覽）
- 美化介面
- 匯出功能

### 階段3：優化與擴展
- 響應式設計
- 效能優化
- 擴展功能

## 十、部署建議

### 方案A（純前端）⭐ GitHub推薦
- **GitHub Pages**：完美支援，免費託管
  - 推送到 GitHub 自動部署
  - URL: `https://username.github.io/programshowsystem/`
  - 詳細步驟請參考 `GitHub部署方案.md`
- 或任何靜態網站託管服務（Netlify、Vercel等）

### 方案B（輕量後端）
- **本地運行**：`python app.py`
- **GitHub部署**：需配合外部服務
  - 前端：GitHub Pages
  - 後端：Vercel、Railway、Render（免費方案）
- 或部署到 Heroku、PythonAnywhere

### 方案C（完整應用）
- 使用 Docker 容器化
- 部署到雲端服務（AWS、Azure、GCP）
- GitHub Codespaces（開發環境）

## 十一、總結與建議

### 推薦方案（依需求選擇）

#### 如果需要在GitHub部署：方案A（純前端方案）⭐
**理由**：
1. **完美適配GitHub**：可直接使用 GitHub Pages 免費部署
2. **部署極簡**：推送到 GitHub 即可自動部署
3. **零成本**：完全免費，無需額外服務
4. **版本控制**：所有變更都在 Git 中
5. **滿足需求**：對於展示需求完全足夠
6. **儲存方案**：使用 LocalStorage/IndexedDB 在瀏覽器儲存

#### 如果需要持久化儲存：方案B（輕量後端方案）
**理由**：
1. 功能完整，可持久化儲存檔案
2. 開發難度適中，易於維護
3. 部署簡單，無需複雜配置
4. 易於擴展，未來可升級為方案C
5. **注意**：需配合 Vercel/Railway 等外部服務部署後端

### 核心技術棧
- **前端**：HTML + CSS + JavaScript + highlight.js
- **後端**：Python Flask
- **儲存**：本地檔案系統

### 開發優先順序
1. ✅ 檔案上傳功能
2. ✅ 檔案列表顯示
3. ✅ 程式碼展示（含高亮）
4. ✅ 基本樣式美化
5. ⭐ 檔案管理（刪除、預覽）
6. ⭐ 匯出功能
7. 🔮 進階功能（搜尋、比較等）

---

**注意事項**：
- **GitHub部署**：詳細步驟請參考 `GitHub部署方案.md`
- 確保上傳目錄有適當的權限設定（方案B/C）
- 考慮檔案大小和數量限制
- 建議添加基本的錯誤處理
- 生產環境需要考慮安全性（如檔案驗證、路徑清理等）
- **純前端方案**：注意 LocalStorage 容量限制（約5-10MB），提供匯出功能
