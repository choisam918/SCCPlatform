<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SCC Platform">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#667eea">
  <title>SCC Platform</title>
  <!-- å„ªåŒ–å­—é«”è¼‰å…¥ -->
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap"></noscript>
  <style>
    /* å…¨å±€ç§»å‹•ç«¯å„ªåŒ– */
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* CSS è®Šæ•¸çµ±ä¸€ç®¡ç† */
    :root {
      --primary-color: #6366f1;
      --secondary-color: #a7c7f9;
      --accent-color: #60a5fa;
      --text-primary: #3b4252;
      --text-secondary: #64748b;
      --bg-primary: #fafdff;
      --bg-secondary: #e8f0fa;
      --border-color: #e0e7ff;
      --shadow-light: 0 2px 8px rgba(60, 72, 88, 0.07);
      --shadow-medium: 0 6px 18px rgba(60, 72, 88, 0.13);
      --border-radius: 18px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --font-family: 'Roboto', 'Noto Sans SC', Arial, sans-serif;
    }
    
    /* æ·±è‰²ä¸»é¡Œè®Šæ•¸ */
    [data-theme="dark"] {
      --primary-color: #818cf8;
      --secondary-color: #4c1d95;
      --accent-color: #60a5fa;
      --text-primary: #e0e0e0;
      --text-secondary: #a0aec0;
      --bg-primary: #1a1a2e;
      --bg-secondary: #2d3748;
      --border-color: #4a5568;
      --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.2);
      --shadow-medium: 0 6px 18px rgba(0, 0, 0, 0.3);
    }
    

    
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-family);
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      height: 100vh;
      overflow-x: hidden; /* åªéš±è—æ°´å¹³æ»¾å‹•æ¢ */
      overflow-y: auto; /* å…§å®¹è¶…å‡ºæ™‚å…è¨±å‚ç›´æ»¾å‹•ï¼›æ»¾å‹•æ¢å¤–è§€å¦è¡Œéš±è— */
      color: var(--text-primary);
      transition: var(--transition);
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    /* ç•¶å…§å®¹ä¸è¶…å‡ºè¦–çª—æ™‚ï¼Œéš±è—æ•´é æ»¾å‹•æ¢ */
    html.no-scroll, body.no-scroll {
      overflow: hidden !important;
      height: 100vh;
    }
    /* éš±è—æ»¾å‹•æ¢ï¼ˆChromium/WebKitï¼‰*/
    html::-webkit-scrollbar,
    body::-webkit-scrollbar,
    html.no-scroll::-webkit-scrollbar,
    body.no-scroll::-webkit-scrollbar {
      width: 0 !important;
      height: 0 !important;
      display: none !important;
    }
    /* éš±è—æ»¾å‹•æ¢ï¼ˆFirefoxï¼‰*/
    html, body, html.no-scroll, body.no-scroll { scrollbar-width: none; }
    html, body { overscroll-behavior: none; }
    .container {
      max-width: 100%;
      width: 100%;
      margin: 0 auto;
      padding: 15px 20px;
      height: auto;
      min-height: calc(100vh - 120px); /* æ¸›å»æ¨™é¡Œæ¬„é«˜åº¦ */
      overflow-y: visible; /* ç”±é é¢çµ±ä¸€æ»¾å‹•ï¼Œé¿å…é›™æ»¾å‹•æ¢ */
    }
    .hero-banner {
      width: 100%;
      background: linear-gradient(90deg, var(--secondary-color) 0%, var(--border-color) 100%);
      color: var(--text-primary);
      /* å¢åŠ å®‰å…¨å€ï¼Œé¿å…æ‰‹æ©Ÿç€æµ·/å·¥å…·åˆ—é®æ“‹ä¸»æ¨™é¡Œï¼›æ•´é«”æ›´ç·Šæ¹Š */
      padding: calc(24px + env(safe-area-inset-top, 0px)) 0 12px 0;
      text-align: center;
      margin-bottom: 18px;
      box-shadow: var(--shadow-light);
    }

    /* é‡å°æ‰‹æ©Ÿè¢å¹•å†åŠ å¤§é ‚éƒ¨å…§è·ï¼Œé¿å…æ¨™é¡Œè¢«ç€è¦½å™¨å·¥å…·åˆ—å®Œå…¨é®æ“‹ */
    @media (max-width: 480px) {
      .hero-banner {
        /* æ‰‹æ©Ÿä¸Šé€²ä¸€æ­¥æ”¶ç·Šé ‚éƒ¨ç©ºç™½ï¼Œä½†ä»ä¿ç•™å®‰å…¨å€ */
        padding-top: calc(28px + env(safe-area-inset-top, 0px)) !important;
        padding-bottom: 8px !important;
        margin-bottom: 10px !important;
      }
      .container {
        padding-left: 12px;
        padding-right: 12px;
      }
      .subsystems {
        padding: 0 12px;
      }
      .theme-toggle { margin-top: 4px; }
    }

    /* ç¢ºä¿åœ¨æ‰‹æ©Ÿèˆ‡å°å¹³æ¿ä¸Šï¼Œä¸»é¡Œåˆ‡æ›èˆ‡ç®¡ç†è€…æŒ‰éˆ•ä¸æœƒæµ®åœ¨æ¨™é¡Œä¸Šæ–¹ */
    @media (max-width: 900px) {
      .theme-toggle {
        position: static !important;
        margin: 8px auto 0 auto;
        justify-content: center;
      }
    }
    .hero-banner h1 {
      font-size: 2.1rem;
      font-weight: 800;
      margin-bottom: 8px;
      letter-spacing: 1.5px;
      text-shadow: none;
    }
    .hero-desc {
      font-size: 1.05rem;
      font-weight: 400;
      letter-spacing: 0.5px;
      opacity: 0.85;
    }
    /* æœç´¢æ¡†æ¨£å¼ */
    .search-container {
      position: relative;
      max-width: 400px;
      margin: 0 auto 20px auto;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 40px 12px 16px;
      border: 2px solid var(--border-color);
      border-radius: 25px;
      font-size: 1rem;
      background: var(--bg-primary);
      transition: var(--transition);
      box-shadow: var(--shadow-light);
      color: var(--text-primary);
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
    }
    
    .search-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #64748b;
      pointer-events: none;
    }
    
    [data-theme="dark"] .search-icon {
      color: var(--text-secondary);
    }
    
    .category-filters {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }
    .category-btn {
      background: linear-gradient(90deg, #e8f0fa 60%, #f0f4ff 100%);
      color: #3b4252;
      border: 2px solid #e0e7ff;
      border-radius: 20px;
      padding: 8px 20px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .category-btn:hover {
      background: linear-gradient(90deg, #dbeafe 60%, #e0e7ff 100%);
      border-color: #6366f1;
      transform: translateY(-1px);
    }
    .category-btn.active {
      background: linear-gradient(90deg, #6366f1 60%, #60a5fa 100%);
      color: #fff;
      border-color: #6366f1;
      box-shadow: 0 2px 8px rgba(99,102,241,0.15);
    }
    .subsystems {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      justify-content: center;
      margin-top: 12px;
      padding: 0 20px;
    }
    .card {
      background: linear-gradient(135deg, #fafdff 60%, #e8f0fa 100%);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-light);
      min-height: 120px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px 6px 8px 6px;
      gap: 4px;
      position: relative;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      text-align: center;
      will-change: transform;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
      z-index: 1;
    }
    
    .card:hover::before {
      left: 100%;
    }
    
    .card:hover {
      transform: translateY(-6px) scale(1.05);
      box-shadow: 0 12px 30px rgba(99, 102, 241, 0.2);
      background: linear-gradient(120deg, #e8f0fa 60%, #fafdff 100%);
    }
    
    .card:active {
      transform: translateY(-2px) scale(1.02);
      transition: all 0.1s ease;
    }
    
    .card.loading {
      pointer-events: none;
      opacity: 0.7;
    }
    
    .card.loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 2px solid #6366f1;
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      z-index: 2;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* å„ªåŒ–éæ¸¡æ€§èƒ½ - åªå°éœ€è¦å‹•ç•«çš„å…ƒç´ è¨­ç½®éæ¸¡ */
    .card,
    .card-btn,
    .category-btn,
    .btn-admin {
      transition-property: transform, opacity, box-shadow, background-color;
      will-change: transform, opacity, box-shadow;
    }
    
    /* å­ç³»çµ±ç¶²æ ¼éæ¸¡ */
    .subsystems {
      transition: all 0.3s ease;
    }
    
    /* å¡ç‰‡é€²å…¥å‹•ç•« - å„ªåŒ–ç‰ˆæœ¬ */
    .card {
      opacity: 0;
      transform: translateY(20px) scale(0.9);
      animation: cardFadeIn 0.6s ease-out forwards;
    }
    
    /* ç‚ºæ¯å€‹å¡ç‰‡è¨­ç½®ä¸åŒçš„å»¶é²ï¼Œå‰µé€ ç€‘å¸ƒæ•ˆæœ */
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.15s; }
    .card:nth-child(3) { animation-delay: 0.2s; }
    .card:nth-child(4) { animation-delay: 0.25s; }
    .card:nth-child(5) { animation-delay: 0.3s; }
    .card:nth-child(6) { animation-delay: 0.35s; }
    .card:nth-child(7) { animation-delay: 0.4s; }
    .card:nth-child(8) { animation-delay: 0.45s; }
    .card:nth-child(9) { animation-delay: 0.5s; }
    .card:nth-child(10) { animation-delay: 0.55s; }
    .card:nth-child(11) { animation-delay: 0.6s; }
    .card:nth-child(12) { animation-delay: 0.65s; }
    
    @keyframes cardFadeIn {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* åˆ†é¡æŒ‰éˆ•éæ¸¡å„ªåŒ– */
    .category-btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .category-btn:hover {
      transform: translateY(-2px) scale(1.05);
    }
    
    .category-btn:active {
      transform: translateY(0) scale(0.98);
    }
    .card-img {
      width: 36px;
      height: 36px;
      object-fit: cover;
      border-radius: 8px;
      background: #f3f4f6;
      margin-bottom: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: block;
      transition: none;
      border: none;
    }
    .card:hover .card-img {
      box-shadow: 0 4px 16px #6366f133;
      border: none;
    }
    .card-title {
      font-size: 0.9rem;
      font-weight: 700;
      color: #3b4252;
      margin-bottom: 2px;
      letter-spacing: 0.3px;
      transition: color 0.16s;
    }
    .card:hover .card-title {
      color: #2563eb;
    }
    .card-desc {
      font-size: 0.75rem;
      color: #64748b;
      margin-bottom: 4px;
      min-height: 20px;
      line-height: 1.3;
    }
    .card-btn {
      background: linear-gradient(90deg, #a7c7f9 60%, #b4e0fa 100%);
      color: #3b4252;
      border: none;
      border-radius: 8px;
      padding: 5px 12px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(99,102,241,0.15);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .card-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .card-btn:hover::before {
      left: 100%;
    }
    
    .card-btn:hover {
      background: linear-gradient(90deg, #b4e0fa 60%, #a7c7f9 100%);
      box-shadow: 0 4px 12px rgba(99,102,241,0.2);
      transform: translateY(-2px);
    }
    
    .card-btn:active {
      transform: translateY(0px);
      transition: all 0.1s ease;
    }
    
    .card-btn.loading {
      pointer-events: none;
      opacity: 0.8;
    }
    .btn-admin {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px 36px;
      font-size: 1.2rem;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      border: none;
      border-radius: 50px;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.25);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      letter-spacing: 0.5px;
      outline: none;
      position: relative;
      overflow: hidden;
      min-width: 200px;
      text-decoration: none;
    }
    .btn-admin::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    .btn-admin:hover::before {
      left: 100%;
    }
    .btn-admin:hover, .btn-admin:focus {
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.35);
      transform: translateY(-3px) scale(1.02);
    }
    .btn-admin:active {
      transform: translateY(-1px) scale(0.98);
    }
    .admin-icon {
      font-size: 1.3rem;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
      transition: transform 0.2s;
    }
    .btn-admin:hover .admin-icon {
      transform: rotate(15deg) scale(1.1);
    }
    .admin-text {
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .footer {
      width: 100%;
      background: #fafdff;
      color: #6b7280;
      text-align: center;
      padding: 10px 0 4px 0;
      font-size: 0.95rem;
      margin-top: 24px;
      border-top: 1px solid #e5e7eb;
    }
    /* å¹³æ¿æ©«å‘æ¨¡å¼å°ˆç”¨å„ªåŒ– */
    @media (min-width: 768px) and (max-width: 1200px) and (orientation: landscape) {
      .container {
        height: auto;
        min-height: calc(100vh - 60px);
        padding-bottom: 60px;
      }
      
      .subsystems {
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
        margin-bottom: 20px;
      }
      
      .card {
        min-height: 110px;
        padding: 8px 5px 6px 5px;
      }
      
      .card-btn {
        padding: 5px 10px;
        font-size: 0.75rem;
        min-height: auto;
      }
    }
    
    /* å¹³æ¿æ¨¡å¼å°ˆç”¨å„ªåŒ– */
    @media (min-width: 768px) and (max-width: 1200px) {
      body {
        overflow-y: auto;
        height: auto;
        min-height: 100vh;
      }
      
      .container {
        height: auto;
        min-height: calc(100vh - 80px);
        overflow-y: visible;
        padding-bottom: 50px;
        margin-bottom: 20px;
      }
      
      .subsystems {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-bottom: 20px;
        padding-bottom: 10px;
      }
      
      .card {
        min-height: 120px;
        padding: 10px 6px 8px 6px;
        margin-bottom: 0;
      }
      
      .card-btn {
        margin-top: auto;
        padding: 5px 12px;
        font-size: 0.8rem;
        min-height: auto;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
    
    @media (max-width: 1200px) and (min-width: 901px) {
      .subsystems { 
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
      }
      .container { 
        padding: 15px;
        height: auto;
        min-height: calc(100vh - 100px);
        overflow-y: visible;
      }
    }
    
    @media (max-width: 900px) {
      .subsystems { 
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
      }
      .container { 
        padding: 10px;
        height: auto;
        min-height: calc(100vh - 90px);
        overflow-y: visible;
      }
    }
    @media (max-width: 700px) {
      .hero-banner h1 { font-size: 1.2rem; }
      .hero-desc { font-size: 0.92rem; }
      .footer { font-size: 0.85rem; }
      .search-container {
        max-width: 300px;
        margin-bottom: 16px;
      }
      .search-input {
        padding: 10px 36px 10px 14px;
        font-size: 0.9rem;
      }
      .subsystems { 
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
      }
      .card-img { width: 32px; height: 32px; }
      .card-title { font-size: 0.85rem; }
      .card-desc { font-size: 0.75rem; }
      .card { padding: 8px 2px 6px 2px; }
      .category-filters {
        gap: 8px;
        margin-bottom: 16px;
      }
      .category-btn {
        padding: 6px 16px;
        font-size: 0.85rem;
      }
      .theme-toggle {
        position: static;
        margin: 10px auto;
        display: flex;
        justify-content: center;
      }
      .theme-btn {
        font-size: 0.8rem;
        padding: 6px 12px;
      }
    }
    /* å¾®ä¿¡ç€è¦½å™¨å°ˆç”¨å„ªåŒ– */
    @media (max-width: 480px) {
      .hero-banner h1 { font-size: 1.1rem; }
      .hero-desc { font-size: 0.85rem; }
      .search-container {
        max-width: 280px;
        margin-bottom: 12px;
      }
      .search-input {
        padding: 8px 32px 8px 12px;
        font-size: 0.85rem;
      }
      .subsystems { 
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 4px;
        padding: 0 8px;
      }
      .card { 
        min-height: 110px;
        padding: 6px 2px 4px 2px;
      }
      .card-img { width: 28px; height: 28px; }
      .card-title { font-size: 0.8rem; }
      .card-desc { font-size: 0.7rem; min-height: 18px; line-height: 1.2; }
      .card-btn { 
        font-size: 0.75rem;
        padding: 4px 10px;
      }
    }
    
    /* é‡å°å¾®ä¿¡ç€è¦½å™¨çš„ç‰¹æ®Šè™•ç† - ç¢ºä¿3åˆ—é¡¯ç¤º */
    @supports (-webkit-touch-callout: none) {
      @media (max-width: 480px) {
        .subsystems {
          grid-template-columns: repeat(3, 1fr) !important;
        }
      }
    }
    
    /* 480pxä»¥ä¸‹çš„å…¶ä»–æ¨£å¼ */
    @media (max-width: 480px) {
      .category-filters {
        gap: 6px;
        margin-bottom: 12px;
      }
      .category-btn {
        padding: 5px 12px;
        font-size: 0.8rem;
      }
      .btn-admin {
        padding: 12px 24px;
        font-size: 1rem;
        min-width: 160px;
      }
      .favorites-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
      }
      .favorite-item {
        padding: 6px;
      }
      .favorite-item-icon {
        width: 20px;
        height: 20px;
        font-size: 0.9rem;
      }
      .favorite-item-name {
        font-size: 0.7rem;
      }
    }

    /* æ·±è‰²æ¨¡å¼æ¨£å¼ - ä½¿ç”¨CSSè®Šæ•¸ */
    [data-theme="dark"] {
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
    }
    
    [data-theme="dark"] .hero-banner {
      background: linear-gradient(90deg, var(--bg-secondary) 0%, var(--border-color) 100%);
      color: var(--text-primary);
    }
    
    [data-theme="dark"] .card {
      background: linear-gradient(135deg, var(--bg-secondary) 60%, var(--bg-primary) 100%);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    
    [data-theme="dark"] .card:hover {
      background: linear-gradient(120deg, var(--bg-primary) 60%, var(--bg-secondary) 100%);
      box-shadow: 0 12px 30px rgba(129, 140, 248, 0.3);
    }
    
    [data-theme="dark"] .card-title {
      color: var(--text-primary);
    }
    
    [data-theme="dark"] .card-desc {
      color: var(--text-secondary);
    }
    
    [data-theme="dark"] .card-btn {
      background: linear-gradient(90deg, var(--primary-color) 60%, var(--accent-color) 100%);
      color: white;
    }
    
    [data-theme="dark"] .card-btn:hover {
      background: linear-gradient(90deg, var(--accent-color) 60%, var(--primary-color) 100%);
      box-shadow: 0 4px 12px rgba(129, 140, 248, 0.4);
    }
    
    [data-theme="dark"] .category-btn {
      background: linear-gradient(90deg, var(--bg-secondary) 60%, var(--bg-primary) 100%);
      color: var(--text-primary);
      border-color: var(--border-color);
    }
    
    [data-theme="dark"] .category-btn:hover {
      background: linear-gradient(90deg, var(--bg-primary) 60%, var(--bg-secondary) 100%);
      border-color: var(--primary-color);
    }
    
    [data-theme="dark"] .category-btn.active {
      background: linear-gradient(90deg, var(--primary-color) 60%, var(--accent-color) 100%);
      color: white;
    }
    
    [data-theme="dark"] .footer {
      background: var(--bg-primary);
      color: var(--text-secondary);
      border-top-color: var(--border-color);
    }
    
    [data-theme="dark"] .search-input {
      background: var(--bg-secondary);
      border-color: var(--border-color);
      color: var(--text-primary);
    }
    
    [data-theme="dark"] .search-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 4px 12px rgba(129, 140, 248, 0.2);
    }
    
    /* ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• */
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .theme-btn {
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      box-shadow: var(--shadow-light);
    }

    /* ç®¡ç†è€…ç™»å…¥ï¼ˆå³ä¸Šè§’å°æŒ‰éˆ•ï¼‰ */
    .btn-admin-small {
      padding: 8px 14px;
      font-size: 0.9rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      border: none;
      border-radius: 20px;
      box-shadow: var(--shadow-light);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn-admin-small:hover {
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      transform: translateY(-1px);
      box-shadow: var(--shadow-medium);
    }
    
    .theme-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
      box-shadow: var(--shadow-medium);
    }
    
    .theme-btn:active {
      transform: translateY(0);
    }
    
    /* æ·±è‰²æ¨¡å¼ä¸‹çš„ä¸»é¡ŒæŒ‰éˆ• */
    [data-theme="dark"] .theme-btn {
      background: rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.2);
      color: var(--text-primary);
    }
    
    [data-theme="dark"] .theme-btn:hover {
      background: rgba(0, 0, 0, 0.5);
    }
    

    
    /* æ”¶è—åŠŸèƒ½æ¨£å¼ */

    

    

    


    
    /* æ•¸æ“šç®¡ç†æŒ‰éˆ•æ¨£å¼ */
    .data-manage-controls .admin-func-btn {
      background: linear-gradient(90deg, #6366f1 60%, #8b5cf6 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
      padding: 10px 16px;
      margin: 0 2px;
    }
    .data-manage-controls .admin-func-btn:hover {
      background: linear-gradient(90deg, #5b21b6 60%, #7c3aed 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }
    [data-theme="dark"] .data-manage-controls .admin-func-btn {
      background: linear-gradient(90deg, var(--primary-color) 60%, var(--accent-color) 100%);
    }
    [data-theme="dark"] .data-manage-controls .admin-func-btn:hover {
      background: linear-gradient(90deg, var(--accent-color) 60%, var(--primary-color) 100%);
    }
    /* é€šçŸ¥æ¨£å¼ */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 1000;
      transform: translateX(100%);
      transition: var(--transition);
      max-width: 300px;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification-success {
      background: linear-gradient(90deg, #10b981, #059669);
    }
    
    .notification-error {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }
    
    .notification-info {
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    }
    
    /* ä¸»é¡Œé¸æ“‡å™¨ */
    .theme-selector {
      position: absolute;
      top: 20px;
      right: 120px;
      display: flex;
      gap: 8px;
    }
    
    .theme-btn {
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: var(--transition);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .theme-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
    }
    
    .theme-btn.active {
      background: var(--primary-color);
      color: white;
    }
    
    /* æ•¸æ“šç®¡ç†æŒ‰éˆ•æ¨£å¼ */
    .data-management {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .data-btn {
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
      color: white;
      border: none;
      border-radius: 12px;
      padding: 10px 16px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: var(--shadow-light);
    }
    
    .data-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
      background: linear-gradient(90deg, var(--accent-color), var(--primary-color));
    }
    
    .data-btn:active {
      transform: translateY(0);
    }
    
    /* å·²ç§»é™¤ç®¡ç†åŠŸèƒ½ç›¸é—œCSSå€å¡Š */
  </style>
</head>
<body>
  <div class="hero-banner">
    <h1>SCC Platform</h1>
    <!-- æè¿°æ–‡å­— - å·²éš±è— -->
    <p class="hero-desc" style="display: none;">å¤šå…ƒå­¸ç¿’å­ç³»çµ±æ•´åˆå¹³å°</p>
    <!-- ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• -->
    <div class="theme-toggle">
      <button class="theme-btn" id="themeToggleBtn" onclick="toggleTheme()">
        <span id="themeIcon">â˜€ï¸</span>
        <span id="themeText">æ·ºè‰²</span>
      </button>
      <button class="btn-admin-small" onclick="openAdminPage()">
        <span class="admin-icon">âš™ï¸</span>
        <span class="admin-text">ç®¡ç†è€…ç™»å…¥</span>
      </button>
    </div>
  </div>
  <div class="container">
    <!-- ç®¡ç†è€…ç™»å…¥æŒ‰éˆ• -->
    <div style="display:none; justify-content:center; margin-bottom:24px;">
      <button class="btn-admin" onclick="openAdminPage()">
        <span class="admin-icon">âš™ï¸</span>
        <span class="admin-text">ç®¡ç†è€…ç™»å…¥</span>
      </button>
    </div>
    
    <!-- æœç´¢æ¡† - å·²éš±è— -->
    <div class="search-container" style="display: none;">
      <input type="text" id="searchInput" class="search-input" placeholder="æœç´¢å­ç³»çµ±..." autocomplete="off">
      <div class="search-icon">ğŸ”</div>
    </div>
    
    <!-- åˆ†é¡ç¯©é¸æŒ‰éˆ• - å·²éš±è— -->
    <div class="category-filters" style="display: none;">
      <button class="category-btn active" data-category="all">å…¨éƒ¨ç³»çµ±</button>
      <button class="category-btn" data-category="knowledge">çŸ¥è­˜åˆ†é¡</button>
      <button class="category-btn" data-category="tools">å·¥å…·æ‡‰ç”¨</button>
    </div>
    <!-- æ•¸æ“šç®¡ç†æŒ‰éˆ•å·²ç§»é™¤ï¼Œåƒ…ç®¡ç†è€…é é¢ä¿ç•™ -->
    
    <div class="subsystems" id="subsystems"></div>
    
    <!-- æ•¸æ“šç®¡ç†æŒ‰éˆ• - å·²éš±è— -->
    <div class="data-management" style="margin-top: 30px; text-align: center; display: none;">
      <button onclick="dataManager.backupToCloud()" class="data-btn">
        <span>â˜ï¸</span>
        <span>é›²ç«¯å‚™ä»½</span>
      </button>
      <button onclick="dataManager.restoreFromCloud()" class="data-btn">
        <span>ğŸ“¥</span>
        <span>æ¢å¾©æ•¸æ“š</span>
      </button>
      <button onclick="dataManager.exportData('json')" class="data-btn">
        <span>ğŸ“¤</span>
        <span>å°å‡ºJSON</span>
      </button>
      <button onclick="dataManager.exportData('csv')" class="data-btn">
        <span>ğŸ“Š</span>
        <span>å°å‡ºCSV</span>
      </button>
      <button onclick="testNotification()" class="data-btn">
        <span>ğŸ””</span>
        <span>æ¸¬è©¦é€šçŸ¥</span>
      </button>
    </div>
    
    <!-- ç®¡ç†åŠŸèƒ½æŒ‰éˆ• -->
    <!-- å·²ç§»é™¤ç®¡ç†åŠŸèƒ½æŒ‰éˆ•å€å¡Š -->
    
    <!-- ç®¡ç†ç™»å…¥æŒ‰éˆ• - å·²éš±è— -->
    <div style="display:flex; justify-content:center; margin-top:36px; display: none;">
      <a class="btn-admin" href="admin.html" target="_blank">
        <span class="admin-icon">âš™ï¸</span>
        <span class="admin-text">ç®¡ç†ç™»å…¥</span>
      </a>
    </div>
  </div>
  <!-- é è…³ - å·²éš±è— -->
  <footer class="footer" style="display: none;">
    <span>Â© 2024 CCS Edu Platform</span>
  </footer>
  <!-- å·²ç§»é™¤ç®¡ç†åŠŸèƒ½æ¨¡æ…‹æ¡†å€å¡Š -->
  <script>
    // å­ç³»çµ±é…ç½®ï¼ˆåŠ å…¥åˆ†é¡ï¼‰- å›ºå®šé †åº
    const defaultSubsystems = [
      { name: 'é›²å±•è¦½', url: './cloudpictureplatform/index.html', desc: '3Dè™›æ“¬å±•è¦½é¤¨', img: './cloudpictureplatform/1.png', category: 'tools', visible: true },
      { name: '7äººè¶³çƒæˆ°è¡“æ¿', url: './football/index.html', desc: '7äººè¶³çƒæˆ°è¡“èˆ‡ç®¡ç†ç³»çµ±<br><span style="color: #2196F3;">(é›»è…¦æˆ–å¹³æ¿ä½¿ç”¨)</span>', img: './football/football.png', category: 'knowledge', visible: true },
      { name: 'éš¨æ©Ÿå¡', url: './ramdomcard/index.html', desc: 'æ¯å¤©æŠ½å–3å¼µå¡ç‰‡', img: './ramdomcard/1.png', category: 'tools', visible: true },
      { name: 'æ‰“å­—ç·´ç¿’', url: './typeanything/index.html', desc: 'ä¸­è‹±æ–‡æ‰“å­—ç·´ç¿’', img: './typeanything/1.png', category: 'knowledge', visible: true },
      { name: 'å››å‰‡é‹ç®—æ•¸å­¸ç·´ç¿’', url: './math/index.html', desc: 'å››å‰‡é‹ç®—æ•¸å­¸ç·´ç¿’', img: './math/Lovepik_com-380042738-math-calculator-symbol-compute.png', category: 'knowledge', visible: true },
      { name: 'æŠ½ç±¤', url: './ramdom/index.html', desc: 'å­¸è™ŸæŠ½ç±¤ç³»çµ±', img: './ramdom/1.png', category: 'tools', visible: true },
      { name: 'åˆ†çµ„å·¥å…·', url: './group/group.html', desc: 'å°çµ„åˆ†é…èˆ‡ç®¡ç†å·¥å…·', img: './group/1.png', category: 'tools', visible: true },
      { name: 'è¨ˆåˆ†æ’å', url: './Rank/index.html', desc: 'è¨ˆåˆ†æ’åç³»çµ±', img: './Rank/1.png', category: 'tools', visible: true },
      { name: 'Learning Python', url: './learningpython/index.html', desc: 'Python å­¸ç¿’ç³»çµ±', img: './learningpython/1.png', category: 'knowledge', visible: false },
      { name: 'å¿«é–ƒ', url: './flashmeaning/index.html', desc: 'å¿«é€Ÿå­¸ç¿’è‹±æ–‡ç”Ÿå­—', img: './flashmeaning/1.jpg', category: 'knowledge', visible: false },
      { name: 'èª²å ‚è¨ˆåˆ†', url: './mark/index.html', desc: 'èª²å ‚è¨ˆåˆ†ç³»çµ±', img: './mark/1.png', category: 'tools', visible: true }
    ];

    let isDarkMode = localStorage.getItem('darkMode') === 'true';

    // ä¸»é¡Œç³»çµ±
    let currentTheme = localStorage.getItem('theme') || 'light';
    
    // ä¸»é¡Œåˆ‡æ›å‡½æ•¸
    function toggleTheme() {
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
    }
    
    // è¨­ç½®ä¸»é¡Œ
    function setTheme(theme) {
      currentTheme = theme;
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      
      // æ›´æ–°æŒ‰éˆ•é¡¯ç¤º
      updateThemeButton(theme);
      
      // å…¼å®¹èˆŠçš„æ·±è‰²æ¨¡å¼
      isDarkMode = theme === 'dark';
      localStorage.setItem('darkMode', isDarkMode);
    }
    
    // æ›´æ–°ä¸»é¡ŒæŒ‰éˆ•é¡¯ç¤º
    function updateThemeButton(theme) {
      const themeIcon = document.getElementById('themeIcon');
      const themeText = document.getElementById('themeText');
      
      if (theme === 'dark') {
        themeIcon.textContent = 'ğŸŒ™';
        themeText.textContent = 'æ·±è‰²';
      } else {
        themeIcon.textContent = 'â˜€ï¸';
        themeText.textContent = 'æ·ºè‰²';
      }
    }
    
    // åˆå§‹åŒ–ä¸»é¡Œ
    function initTheme() {
      // é»˜èªä½¿ç”¨æ·ºè‰²æ¨¡å¼
      if (!localStorage.getItem('theme')) {
        currentTheme = 'light';
      }
      
      setTheme(currentTheme);
    }
    
    // å…¼å®¹èˆŠçš„æ·±è‰²æ¨¡å¼å‡½æ•¸
    function toggleDarkMode() {
      toggleTheme();
    }
    
    function initDarkMode() {
      initTheme();
    }

    // æ•¸æ“šé©—è­‰å‡½æ•¸
    function validateSubsystem(subsystem) {
      const required = ['name', 'url'];
      const missing = required.filter(field => !subsystem[field]);
      if (missing.length > 0) {
        throw new Error(`å­ç³»çµ±ç¼ºå°‘å¿…è¦æ¬„ä½: ${missing.join(', ')}`);
      }
      
      if (subsystem.name.length > 50) {
        throw new Error('å­ç³»çµ±åç¨±éé•·');
      }
      
      if (subsystem.url.length > 200) {
        throw new Error('å­ç³»çµ±ç¶²å€éé•·');
      }
      
      return true;
    }
    
    // è¼‰å…¥å­ç³»çµ±æ•¸æ“šï¼ˆé¦–é åªåšå…¼å®¹ï¼Œä¸å†åˆä½µï¼‰
    function loadSubsystemsData() {
      // æª¢æŸ¥æ˜¯å¦å·²ç¶“æœ‰ä¿å­˜çš„æ•¸æ“š
      const savedData = localStorage.getItem('subsystems');
      if (!savedData) {
        // åªæœ‰åœ¨æ²’æœ‰ä¿å­˜æ•¸æ“šæ™‚æ‰ä½¿ç”¨é è¨­å€¼
        localStorage.setItem('subsystems', JSON.stringify(defaultSubsystems));
      } else {
        // å¦‚æœæœ‰ä¿å­˜çš„æ•¸æ“šï¼Œæª¢æŸ¥æ˜¯å¦åŒ…å« Learning Python å’Œéš¨æ©Ÿå¡ç³»çµ±
        try {
          const parsed = JSON.parse(savedData);
          if (Array.isArray(parsed)) {
            let needsUpdate = false;
            
            // æª¢æŸ¥ Learning Python ç³»çµ±ï¼ˆè¨­ç½®ç‚ºéš±è—ï¼‰
            const learningPythonIndex = parsed.findIndex(sys => sys.name === 'Learning Python');
            if (learningPythonIndex === -1) {
              // å¦‚æœæ²’æœ‰ Learning Python ç³»çµ±ï¼Œæ·»åŠ åˆ°æœ«å°¾ä¸¦è¨­ç½®ç‚ºéš±è—
              const learningPython = defaultSubsystems.find(sys => sys.name === 'Learning Python');
              if (learningPython) {
                learningPython.visible = false;
                parsed.push(learningPython);
                needsUpdate = true;
              }
            } else {
              // å¦‚æœå·²æœ‰ Learning Python ç³»çµ±ï¼Œç¢ºä¿è¨­ç½®ç‚ºéš±è—ä¸¦æ›´æ–°å…¶åœ–æ¨™
              parsed[learningPythonIndex].visible = false;
              const learningPython = defaultSubsystems.find(sys => sys.name === 'Learning Python');
              if (learningPython) {
                if (parsed[learningPythonIndex].img !== learningPython.img) {
                  parsed[learningPythonIndex].img = learningPython.img;
                  needsUpdate = true;
                }
                if (parsed[learningPythonIndex].visible !== false) {
                  needsUpdate = true;
                }
              }
            }
            
            // åˆªé™¤èˆŠçš„"æ¯æ—¥å‹µå¿—å¡ç‰‡"ç³»çµ±ï¼ˆé¿å…é‡è¤‡ï¼‰
            const oldCardIndex = parsed.findIndex(sys => sys.name === 'æ¯æ—¥å‹µå¿—å¡ç‰‡');
            if (oldCardIndex !== -1) {
              parsed.splice(oldCardIndex, 1);
              needsUpdate = true;
            }
            
            // æª¢æŸ¥é›²å±•è¦½ç³»çµ±ï¼ˆç¢ºä¿åœ¨ç¬¬ä¸€ä½ï¼‰
            const cloudExhibitionIndex = parsed.findIndex(sys => sys.name === 'é›²å±•è¦½');
            if (cloudExhibitionIndex === -1) {
              // å¦‚æœæ²’æœ‰é›²å±•è¦½ç³»çµ±ï¼Œæ·»åŠ åˆ°ç¬¬ä¸€ä½
              const cloudExhibition = defaultSubsystems.find(sys => sys.name === 'é›²å±•è¦½');
              if (cloudExhibition) {
                parsed.unshift(cloudExhibition); // ä½¿ç”¨ unshift æ·»åŠ åˆ°ç¬¬ä¸€ä½
                needsUpdate = true;
              }
            } else if (cloudExhibitionIndex !== 0) {
              // å¦‚æœé›²å±•è¦½ç³»çµ±ä¸åœ¨ç¬¬ä¸€ä½ï¼Œç§»åˆ°ç¬¬ä¸€ä½
              const cloudExhibition = parsed.splice(cloudExhibitionIndex, 1)[0];
              parsed.unshift(cloudExhibition);
              needsUpdate = true;
            } else {
              // å¦‚æœå·²åœ¨ç¬¬ä¸€ä½ï¼Œæª¢æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°æè¿°å’Œåœ–æ¨™
              const cloudExhibition = defaultSubsystems.find(sys => sys.name === 'é›²å±•è¦½');
              if (cloudExhibition) {
                if (parsed[0].desc !== cloudExhibition.desc || parsed[0].img !== cloudExhibition.img || parsed[0].url !== cloudExhibition.url) {
                  parsed[0].desc = cloudExhibition.desc;
                  parsed[0].img = cloudExhibition.img;
                  parsed[0].url = cloudExhibition.url;
                  needsUpdate = true;
                }
              }
            }
            
            // æª¢æŸ¥è¶³çƒç³»çµ±ï¼ˆç¢ºä¿åœ¨ç¬¬äºŒä½ï¼Œå¦‚æœé›²å±•è¦½å­˜åœ¨ï¼‰
            const footballIndex = parsed.findIndex(sys => sys.name === '7äººè¶³çƒæˆ°è¡“æ¿');
            const cloudExhibitionExists = parsed.findIndex(sys => sys.name === 'é›²å±•è¦½') === 0;
            const footballTargetPosition = cloudExhibitionExists ? 1 : 0; // å¦‚æœé›²å±•è¦½å­˜åœ¨ï¼Œç›®æ¨™ä½ç½®æ˜¯1ï¼Œå¦å‰‡ç‚º0
            
            if (footballIndex === -1) {
              // å¦‚æœæ²’æœ‰è¶³çƒç³»çµ±ï¼Œæ·»åŠ åˆ°ç›®æ¨™ä½ç½®
              const footballSystem = defaultSubsystems.find(sys => sys.name === '7äººè¶³çƒæˆ°è¡“æ¿');
              if (footballSystem) {
                parsed.splice(footballTargetPosition, 0, footballSystem);
                needsUpdate = true;
              }
            } else if (footballIndex !== footballTargetPosition) {
              // å¦‚æœè¶³çƒç³»çµ±ä¸åœ¨ç›®æ¨™ä½ç½®ï¼Œç§»åˆ°ç›®æ¨™ä½ç½®
              const footballSystem = parsed.splice(footballIndex, 1)[0];
              parsed.splice(footballTargetPosition, 0, footballSystem);
              needsUpdate = true;
            } else {
              // å¦‚æœå·²åœ¨ç›®æ¨™ä½ç½®ï¼Œæª¢æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°æè¿°å’Œåœ–æ¨™
              const footballSystem = defaultSubsystems.find(sys => sys.name === '7äººè¶³çƒæˆ°è¡“æ¿');
              if (footballSystem) {
                if (parsed[footballTargetPosition].desc !== footballSystem.desc || parsed[footballTargetPosition].img !== footballSystem.img || parsed[footballTargetPosition].url !== footballSystem.url) {
                  parsed[footballTargetPosition].desc = footballSystem.desc;
                  parsed[footballTargetPosition].img = footballSystem.img;
                  parsed[footballTargetPosition].url = footballSystem.url;
                  needsUpdate = true;
                }
              }
            }
            
            // æª¢æŸ¥å¿«é–ƒç³»çµ±ï¼ˆè¨­ç½®ç‚ºéš±è—ï¼‰
            const flashIndex = parsed.findIndex(sys => sys.name === 'å¿«é–ƒ' || sys.name === 'æ€é–ƒ');
            if (flashIndex === -1) {
              // å¦‚æœæ²’æœ‰å¿«é–ƒç³»çµ±ï¼Œæ·»åŠ åˆ°æœ«å°¾ä¸¦è¨­ç½®ç‚ºéš±è—
              const flashSystem = defaultSubsystems.find(sys => sys.name === 'å¿«é–ƒ');
              if (flashSystem) {
                flashSystem.visible = false;
                parsed.push(flashSystem);
                needsUpdate = true;
              }
            } else {
              // å¦‚æœå·²æœ‰å¿«é–ƒç³»çµ±ï¼Œç¢ºä¿è¨­ç½®ç‚ºéš±è—ä¸¦æ›´æ–°å…¶æè¿°å’Œåœ–æ¨™
              parsed[flashIndex].visible = false;
              // çµ±ä¸€åç¨±ç‚º"å¿«é–ƒ"
              if (parsed[flashIndex].name === 'æ€é–ƒ') {
                parsed[flashIndex].name = 'å¿«é–ƒ';
                needsUpdate = true;
              }
              const flashSystem = defaultSubsystems.find(sys => sys.name === 'å¿«é–ƒ');
              if (flashSystem) {
                if (parsed[flashIndex].desc !== flashSystem.desc || parsed[flashIndex].img !== flashSystem.img) {
                  parsed[flashIndex].desc = flashSystem.desc;
                  parsed[flashIndex].img = flashSystem.img;
                  needsUpdate = true;
                }
                if (parsed[flashIndex].visible !== false) {
                  needsUpdate = true;
                }
              }
            }
            
            // æª¢æŸ¥èª²å ‚è¨ˆåˆ†ç³»çµ±
            const markIndex = parsed.findIndex(sys => sys.name === 'èª²å ‚è¨ˆåˆ†');
            if (markIndex === -1) {
              // å¦‚æœæ²’æœ‰èª²å ‚è¨ˆåˆ†ç³»çµ±ï¼Œæ·»åŠ åˆ°æœ«å°¾
              const markSystem = defaultSubsystems.find(sys => sys.name === 'èª²å ‚è¨ˆåˆ†');
              if (markSystem) {
                parsed.push(markSystem);
                needsUpdate = true;
              }
            } else {
              // å¦‚æœå·²æœ‰èª²å ‚è¨ˆåˆ†ç³»çµ±ï¼Œæ›´æ–°å…¶æè¿°å’Œåœ–æ¨™
              const markSystem = defaultSubsystems.find(sys => sys.name === 'èª²å ‚è¨ˆåˆ†');
              if (markSystem) {
                if (parsed[markIndex].desc !== markSystem.desc || parsed[markIndex].img !== markSystem.img) {
                  parsed[markIndex].desc = markSystem.desc;
                  parsed[markIndex].img = markSystem.img;
                  needsUpdate = true;
                }
              }
            }
            
            if (needsUpdate) {
              localStorage.setItem('subsystems', JSON.stringify(parsed));
            }
          }
        } catch (e) {
          // å¦‚æœè§£æå¤±æ•—ï¼Œä½¿ç”¨é»˜èªå€¼
          localStorage.setItem('subsystems', JSON.stringify(defaultSubsystems));
        }
      }
    }

    // ä¿å­˜å­ç³»çµ±æ•¸æ“š
    function saveSubsystemsData() {
      const subsystems = getSubsystemsForIndex();
      localStorage.setItem('subsystems', JSON.stringify(subsystems));
    }
    
    // æ•¸æ“šç®¡ç†å¢å¼·åŠŸèƒ½
    class DataManager {
      constructor() {
        this.version = '2.0.0';
        this.lastBackup = localStorage.getItem('lastBackup') || null;
      }
      
      // å‚™ä»½æ•¸æ“šåˆ°é›²ç«¯
      async backupToCloud() {
        try {
          const data = {
            subsystems: getSubsystemsForIndex(),
            settings: {
              darkMode: isDarkMode,
              category: 'all',
              lastVisit: new Date().toISOString()
            },
            stats: JSON.parse(localStorage.getItem('usageStats') || '{}'),
            version: this.version,
            timestamp: new Date().toISOString()
          };
          
          // æ¨¡æ“¬é›²ç«¯å‚™ä»½ï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­æœƒç™¼é€åˆ°çœŸå¯¦APIï¼‰
          console.log('å‚™ä»½æ•¸æ“šåˆ°é›²ç«¯:', data);
          
          // ä¿å­˜å‚™ä»½æ™‚é–“
          this.lastBackup = new Date().toISOString();
          localStorage.setItem('lastBackup', this.lastBackup);
          
          this.showNotification('å‚™ä»½æˆåŠŸ', 'success');
          return true;
        } catch (error) {
          console.error('å‚™ä»½å¤±æ•—:', error);
          this.showNotification('å‚™ä»½å¤±æ•—', 'error');
          return false;
        }
      }
      
      // å¾é›²ç«¯æ¢å¾©æ•¸æ“š
      async restoreFromCloud() {
        try {
          // æ¨¡æ“¬å¾é›²ç«¯æ¢å¾©æ•¸æ“š
          console.log('å¾é›²ç«¯æ¢å¾©æ•¸æ“š');
          
          // é€™è£¡æœƒå¾çœŸå¯¦APIç²å–æ•¸æ“š
          const currentSystems = getSubsystemsForIndex();
          const restoredData = {
            subsystems: currentSystems,
            settings: { darkMode: false, category: 'all' }
          };
          
          // æ‡‰ç”¨æ¢å¾©çš„æ•¸æ“š
          if (restoredData.subsystems && Array.isArray(restoredData.subsystems)) {
            localStorage.setItem('subsystems', JSON.stringify(restoredData.subsystems));
          }
          if (restoredData.settings) {
            isDarkMode = restoredData.settings.darkMode;
            if (restoredData.settings.darkMode !== undefined) {
              setTheme(restoredData.settings.darkMode ? 'dark' : 'light');
            }
          }
          
          saveSubsystemsData();
          renderSubsystems();
          initDarkMode();
          
          this.showNotification('æ¢å¾©æˆåŠŸ', 'success');
          return true;
        } catch (error) {
          console.error('æ¢å¾©å¤±æ•—:', error);
          this.showNotification('æ¢å¾©å¤±æ•—', 'error');
          return false;
        }
      }
      
      // å°å‡ºæ•¸æ“š
      exportData(format = 'json') {
        const data = {
          subsystems: getSubsystemsForIndex(),
          settings: {
            darkMode: isDarkMode,
            category: 'all'
          },
          stats: JSON.parse(localStorage.getItem('usageStats') || '{}'),
          exportDate: new Date().toISOString(),
          version: this.version
        };
        
        let content, filename, mimeType;
        
        switch (format) {
          case 'json':
            content = JSON.stringify(data, null, 2);
            filename = `ccs-platform-backup-${new Date().toISOString().split('T')[0]}.json`;
            mimeType = 'application/json';
            break;
          case 'csv':
            content = this.convertToCSV(data.subsystems);
            filename = `ccs-platform-subsystems-${new Date().toISOString().split('T')[0]}.csv`;
            mimeType = 'text/csv';
            break;
          case 'xml':
            content = this.convertToXML(data);
            filename = `ccs-platform-backup-${new Date().toISOString().split('T')[0]}.xml`;
            mimeType = 'application/xml';
            break;
          case 'yaml':
            content = this.convertToYAML(data);
            filename = `ccs-platform-backup-${new Date().toISOString().split('T')[0]}.yaml`;
            mimeType = 'text/yaml';
            break;
          default:
            throw new Error('ä¸æ”¯æ´çš„æ ¼å¼');
        }
        
        this.downloadFile(content, filename, mimeType);
        this.showNotification(`å·²å°å‡º ${format.toUpperCase()} æ ¼å¼`, 'success');
      }
      
      // è½‰æ›ç‚ºCSVæ ¼å¼
      convertToCSV(subsystems) {
        const headers = ['name', 'url', 'desc', 'img', 'category', 'visible'];
        const csvContent = [
          headers.join(','),
          ...subsystems.map(sys => 
            headers.map(header => {
              const value = sys[header] || '';
              return `"${value.toString().replace(/"/g, '""')}"`;
            }).join(',')
          )
        ].join('\n');
        
        return csvContent;
      }
      
      // è½‰æ›ç‚ºXMLæ ¼å¼
      convertToXML(data) {
        const xml = `<?xml version="1.0" encoding="UTF-8"?>
<ccs-platform>
  <version>${data.version}</version>
  <export-date>${data.exportDate}</export-date>
  <settings>
    <dark-mode>${data.settings.darkMode}</dark-mode>
    <category>${data.settings.category}</category>
  </settings>
  <subsystems>
    ${data.subsystems.map(sys => `
    <subsystem>
      <name>${sys.name}</name>
      <url>${sys.url}</url>
      <desc>${sys.desc || ''}</desc>
      <img>${sys.img || ''}</img>
      <category>${sys.category}</category>
      <visible>${sys.visible}</visible>
    </subsystem>`).join('')}
  </subsystems>
</ccs-platform>`;
        
        return xml;
      }
      
      // è½‰æ›ç‚ºYAMLæ ¼å¼
      convertToYAML(data) {
        const yaml = `version: ${data.version}
export_date: ${data.exportDate}
settings:
  dark_mode: ${data.settings.darkMode}
  category: ${data.settings.category}
subsystems:
${data.subsystems.map(sys => `  - name: ${sys.name}
    url: ${sys.url}
    desc: ${sys.desc || ''}
    img: ${sys.img || ''}
    category: ${sys.category}
    visible: ${sys.visible}`).join('\n')}`;
        
        return yaml;
      }
      
      // ä¸‹è¼‰æ–‡ä»¶
      downloadFile(content, filename, mimeType) {
        const blob = new Blob([content], { type: mimeType });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }
      
      // é¡¯ç¤ºé€šçŸ¥
      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.add('show');
        }, 100);
        
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 3000);
      }
      
      // ç³»çµ±å¥åº·æª¢æŸ¥
      async systemHealthCheck() {
        const systems = getSubsystemsForIndex();
        const health = {
          totalSystems: systems.length,
          activeSystems: systems.filter(s => s.visible !== false).length,
          brokenLinks: [],
          performance: {},
          lastBackup: this.lastBackup,
          storageUsage: this.getStorageUsage()
        };
        
        // æª¢æŸ¥é€£çµæœ‰æ•ˆæ€§
        for (const sys of systems) {
          try {
            const response = await fetch(sys.url, { method: 'HEAD' });
            if (!response.ok) {
              health.brokenLinks.push(sys.name);
            }
          } catch (error) {
            health.brokenLinks.push(sys.name);
          }
        }
        
        return health;
      }
      
      // ç²å–å­˜å„²ä½¿ç”¨æƒ…æ³
      getStorageUsage() {
        const used = new Blob([localStorage.getItem('subsystems') || '']).size;
        const total = 5 * 1024 * 1024; // 5MB é™åˆ¶
        return {
          used: used,
          total: total,
          percentage: (used / total * 100).toFixed(2)
        };
      }
    }
    
    // å‰µå»ºæ•¸æ“šç®¡ç†å™¨å¯¦ä¾‹
    const dataManager = new DataManager();
    
    // æ¨é€é€šçŸ¥åŠŸèƒ½
    async function requestNotificationPermission() {
      try {
        const permission = await Notification.requestPermission();
        if (permission === 'granted') {
          console.log('æ¨é€é€šçŸ¥æ¬Šé™å·²æˆäºˆ');
          subscribeToPushNotifications();
        } else {
          console.log('æ¨é€é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•');
        }
      } catch (error) {
        console.error('è«‹æ±‚æ¨é€é€šçŸ¥æ¬Šé™å¤±æ•—:', error);
      }
    }
    
    
    // æ¸¬è©¦æ¨é€é€šçŸ¥
    function testNotification() {
      // ä½¿ç”¨ç€è¦½å™¨åŸç”Ÿé€šçŸ¥
      if ('Notification' in window && Notification.permission === 'granted') {
        new Notification('SCC Platform', {
          body: 'é€™æ˜¯ä¸€å€‹æ¸¬è©¦é€šçŸ¥',
          vibrate: [100, 50, 100],
          data: {
            dateOfArrival: Date.now(),
            primaryKey: 1
          }
        });
      } else if ('Notification' in window) {
        Notification.requestPermission().then(permission => {
          if (permission === 'granted') {
            new Notification('SCC Platform', {
              body: 'é€™æ˜¯ä¸€å€‹æ¸¬è©¦é€šçŸ¥',
              vibrate: [100, 50, 100],
              data: {
                dateOfArrival: Date.now(),
                primaryKey: 1
              }
            });
          } else {
            alert('é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•');
          }
        });
      } else {
        alert('é€šçŸ¥åŠŸèƒ½ä¸å¯ç”¨');
      }
    }





    // æ‹–æ‹½æ’åºåŠŸèƒ½
    let isDragMode = false;
    let draggedElement = null;

    function toggleDragMode() {
      isDragMode = !isDragMode;
      const cards = document.querySelectorAll('.card');
      
      cards.forEach(card => {
        if (isDragMode) {
          card.draggable = true;
          card.style.cursor = 'grab';
          card.addEventListener('dragstart', handleDragStart);
          card.addEventListener('dragover', handleDragOver);
          card.addEventListener('drop', handleDrop);
          card.addEventListener('dragend', handleDragEnd);
        } else {
          card.draggable = false;
          card.style.cursor = 'pointer';
          card.classList.remove('dragging', 'drag-over');
          card.removeEventListener('dragstart', handleDragStart);
          card.removeEventListener('dragover', handleDragOver);
          card.removeEventListener('drop', handleDrop);
          card.removeEventListener('dragend', handleDragEnd);
        }
      });
      
      // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
      const btn = document.querySelector('[onclick="toggleDragMode()"]');
      if (isDragMode) {
        btn.innerHTML = '<span class="admin-func-icon">âœ…</span><span class="admin-func-text">å®Œæˆæ’åº</span>';
        btn.style.background = 'linear-gradient(90deg, #10b981 60%, #059669 100%)';
      } else {
        btn.innerHTML = '<span class="admin-func-icon">ğŸ“‹</span><span class="admin-func-text">æ’åºç®¡ç†</span>';
        btn.style.background = 'linear-gradient(90deg, #6366f1 60%, #8b5cf6 100%)';
      }
    }

    function handleDragStart(e) {
      draggedElement = e.target;
      e.target.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      if (e.target.classList.contains('card') && e.target !== draggedElement) {
        e.target.classList.add('drag-over');
      }
    }

    function handleDrop(e) {
      e.preventDefault();
      if (e.target.classList.contains('card') && e.target !== draggedElement) {
        const draggedIndex = Array.from(draggedElement.parentNode.children).indexOf(draggedElement);
        const dropIndex = Array.from(e.target.parentNode.children).indexOf(e.target);
        
        // é‡æ–°æ’åºå­ç³»çµ±æ•¸çµ„
        const systems = getSubsystemsForIndex();
        const draggedSystem = systems.splice(draggedIndex, 1)[0];
        systems.splice(dropIndex, 0, draggedSystem);
        
        // ä¿å­˜æ–°é †åº
        localStorage.setItem('subsystems', JSON.stringify(systems));
        
        // é‡æ–°æ¸²æŸ“
        renderSubsystems();
      }
    }

    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      document.querySelectorAll('.card').forEach(card => {
        card.classList.remove('drag-over');
      });
    }

    // è‡ªå®šç¾©åœ–æ¨™åŠŸèƒ½
    function showCustomizeModal() {
      const modal = document.getElementById('customizeModal');
      const systemSelect = document.getElementById('systemSelect');
      
      if (!modal || !systemSelect) return;
      
      // å¡«å……å­ç³»çµ±é¸é …
      systemSelect.innerHTML = '<option value="">è«‹é¸æ“‡å­ç³»çµ±</option>';
      const systems = getSubsystemsForIndex();
      systems.forEach(sys => {
        const option = document.createElement('option');
        option.value = sys.name;
        option.textContent = sys.name;
        systemSelect.appendChild(option);
      });
      
      modal.classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    function saveCustomIcon() {
      const systemName = document.getElementById('systemSelect').value;
      const iconPath = document.getElementById('iconPath').value;
      
      if (!systemName || !iconPath) {
        alert('è«‹é¸æ“‡å­ç³»çµ±ä¸¦è¼¸å…¥åœ–æ¨™è·¯å¾‘');
        return;
      }
      
      const systems = getSubsystemsForIndex();
      const system = systems.find(sys => sys.name === systemName);
      if (system) {
        system.img = iconPath;
        localStorage.setItem('subsystems', JSON.stringify(systems));
        renderSubsystems();
        closeModal('customizeModal');
        alert('åœ–æ¨™å·²æ›´æ–°');
      }
    }

    // æ‰¹é‡æ“ä½œåŠŸèƒ½
    function showBatchOperations() {
      const modal = document.getElementById('batchModal');
      const batchList = document.getElementById('batchSystemsList');
      
      if (!modal || !batchList) return;
      
      batchList.innerHTML = '';
      const systems = getSubsystemsForIndex();
      systems.forEach(sys => {
        const item = document.createElement('div');
        item.className = 'batch-item';
        item.innerHTML = `
          <input type="checkbox" class="batch-checkbox" value="${sys.name}">
          <div class="batch-info">
            <div class="batch-name">${sys.name}</div>
            <div class="batch-desc">${sys.desc || ''}</div>
          </div>
        `;
        batchList.appendChild(item);
      });
      
      modal.classList.add('active');
    }

    function executeBatchOperation() {
      const action = document.getElementById('batchAction').value;
      const selectedSystems = Array.from(document.querySelectorAll('.batch-checkbox:checked'))
        .map(cb => cb.value);
      
      if (!action || selectedSystems.length === 0) {
        alert('è«‹é¸æ“‡æ“ä½œå’Œå­ç³»çµ±');
        return;
      }
      
      const systems = getSubsystemsForIndex();
      selectedSystems.forEach(systemName => {
        const system = systems.find(sys => sys.name === systemName);
        if (system) {
          switch (action) {
            case 'favorite':
              system.favorite = true;
              break;
            case 'unfavorite':
              system.favorite = false;
              break;
          }
        }
      });
      
      localStorage.setItem('subsystems', JSON.stringify(systems));
      renderSubsystems();
      closeModal('batchModal');
      alert(`å·²å° ${selectedSystems.length} å€‹å­ç³»çµ±åŸ·è¡Œ ${action} æ“ä½œ`);
    }

    // æœç´¢åŠŸèƒ½ï¼ˆç°¡åŒ–ç‰ˆæœ¬ï¼Œç›´æ¥é¡¯ç¤ºæ‰€æœ‰å­ç³»çµ±ï¼‰
    function filterBySearch(query) {
      const cards = document.querySelectorAll('.card');
      const searchQuery = query.toLowerCase().trim();
      
      cards.forEach(card => {
        const title = card.querySelector('.card-title').textContent.toLowerCase();
        const desc = card.querySelector('.card-desc').textContent.toLowerCase();
        const isMatch = title.includes(searchQuery) || desc.includes(searchQuery);
        
        if (searchQuery === '') {
          // å¦‚æœæœç´¢æ¡†ç‚ºç©ºï¼Œé¡¯ç¤ºæ‰€æœ‰å¡ç‰‡
          card.style.display = 'flex';
        } else {
          card.style.display = isMatch ? 'flex' : 'none';
        }
      });
    }
    
    // åˆ†é¡ç¯©é¸åŠŸèƒ½ - å·²ç§»é™¤ï¼ˆç›´æ¥é¡¯ç¤ºæ‰€æœ‰å­ç³»çµ±ï¼‰

    // æ¸²æŸ“å­ç³»çµ± - å„ªåŒ–ç‰ˆæœ¬ï¼ˆç›´æ¥é¡¯ç¤ºæ‰€æœ‰å¯è¦‹å­ç³»çµ±ï¼‰
    function renderSubsystems() {
      const container = document.getElementById('subsystems');
      const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æª”ç‰‡æ®µæé«˜æ€§èƒ½
      
      // æ‰¹é‡è™•ç†DOMæ“ä½œ - ç›´æ¥é¡¯ç¤ºæ‰€æœ‰å¯è¦‹å­ç³»çµ±
      const visibleSystems = getSubsystemsForIndex();
      
      visibleSystems.forEach((sys, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        
        // å„ªåŒ–åœ–ç‰‡è¼‰å…¥
        const imgElement = sys.img 
          ? `<img src='${sys.img}' class='card-img' alt='${sys.name}' loading='lazy' decoding='async' onerror='this.style.display="none";this.nextElementSibling.style.display="flex"'>
             <div class='card-img' style='display:none;align-items:center;justify-content:center;font-size:2.5rem;color:#bdbdbd;'>?</div>` 
          : `<div class='card-img' style='display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:#bdbdbd;'>?</div>`;
        
        card.innerHTML = `
          ${imgElement}
          <div class="card-title">${sys.name}</div>
          <div class="card-desc">${sys.desc || ''}</div>
          <button class="card-btn">æ‰“é–‹</button>
        `;
        
        // ä½¿ç”¨äº‹ä»¶å§”è¨—é¿å…éå¤šäº‹ä»¶ç›£è½å™¨
        card.dataset.url = sys.url;
        
        // è¨­ç½®å‹•ç•«å»¶é²ï¼Œç¢ºä¿æ¯å€‹å¡ç‰‡éƒ½æœ‰å‹•ç•«
        card.style.animationDelay = `${0.1 + index * 0.05}s`;
        
        fragment.appendChild(card);
      });
      
      // ä¸€æ¬¡æ€§æ›´æ–°DOM
      container.innerHTML = '';
      container.appendChild(fragment);
      // æ ¹æ“šå…§å®¹é«˜åº¦æ±ºå®šæ˜¯å¦éœ€è¦é¡¯ç¤ºæ»¾å‹•æ¢
      if (typeof updateScrollbarVisibility === 'function') {
        updateScrollbarVisibility();
      }
      
      // è§¸ç™¼é‡ç¹ªä»¥ç¢ºä¿å‹•ç•«æ­£å¸¸æ’­æ”¾
      requestAnimationFrame(() => {
        container.style.opacity = '1';
      });
    }

    // æ‡¶è¼‰å…¥åŠŸèƒ½
    function lazyLoadFeatures() {
      // åªåœ¨éœ€è¦æ™‚è¼‰å…¥é¡å¤–åŠŸèƒ½
      const features = {
        dataManager: null,
        advancedSearch: null,
        analytics: null
      };
      
      return {
        async loadDataManager() {
          if (!features.dataManager) {
            // æ¨¡æ“¬å‹•æ…‹è¼‰å…¥
            features.dataManager = await new Promise(resolve => {
              setTimeout(() => {
                resolve({
                  exportData: () => console.log('æ•¸æ“šå°å‡ºåŠŸèƒ½'),
                  importData: () => console.log('æ•¸æ“šå°å…¥åŠŸèƒ½')
                });
              }, 100);
            });
          }
          return features.dataManager;
        },
        
        async loadAdvancedSearch() {
          if (!features.advancedSearch) {
            features.advancedSearch = await new Promise(resolve => {
              setTimeout(() => {
                resolve({
                  fuzzySearch: (query) => console.log('æ¨¡ç³Šæœç´¢:', query),
                  filterByTags: (tags) => console.log('æ¨™ç±¤ç¯©é¸:', tags)
                });
              }, 100);
            });
          }
          return features.advancedSearch;
        }
      };
    }
    
    const lazyLoader = lazyLoadFeatures();

    // æ ¹æ“šå…§å®¹é«˜åº¦æ±ºå®šæ˜¯å¦é¡¯ç¤ºæ»¾å‹•æ¢
    function updateScrollbarVisibility() {
      const root = document.documentElement;
      const body = document.body;
      const contentHeight = Math.max(
        body.scrollHeight,
        root.scrollHeight,
        body.offsetHeight,
        root.offsetHeight
      );
      // åˆ¤æ–·æ˜¯å¦æº¢å‡ºï¼šå…è¨±æœ€å¤š 8px çš„æµ®å‹•ï¼ˆå­—é«”ã€å­åƒç´ æ²å‹•ã€é™°å½±ç­‰å°è‡´çš„èª¤å·®ï¼‰
      const delta = contentHeight - window.innerHeight;
      const hasOverflow = delta > 8;
      if (hasOverflow) {
        root.classList.remove('no-scroll');
        document.body.classList.remove('no-scroll');
        root.style.height = '';
        body.style.height = '';
      } else {
        root.classList.add('no-scroll');
        document.body.classList.add('no-scroll');
        // å¼·åˆ¶å°‡é é¢é«˜åº¦é–å®šç‚ºè¦–çª—é«˜åº¦ï¼Œé¿å…ç€è¦½å™¨é¡¯ç¤ºæ¥µç´°æ»¾å‹•æ¢
        const h = window.innerHeight + 'px';
        root.style.height = h;
        body.style.height = h;
      }
    }
    window.addEventListener('resize', updateScrollbarVisibility);

    // æ‰“é–‹ç®¡ç†é é¢
    function openAdminPage() {
      try {
        console.log('æ‰“é–‹ç®¡ç†é é¢...');
        window.location.href = 'admin.html';
      } catch (error) {
        console.error('æ‰“é–‹ç®¡ç†é é¢å¤±æ•—:', error);
        alert('ç„¡æ³•æ‰“é–‹ç®¡ç†é é¢ï¼Œè«‹æª¢æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨');
      }
    }
    
    // æ¸…é™¤æ‰€æœ‰loadingçŠ¶æ€
    function clearAllLoadingStates() {
      // æ¸…é™¤æ‰€æœ‰å¡ç‰‡çš„loadingçŠ¶æ€
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.classList.remove('loading');
        card.style.transform = '';
        
        // æ¸…é™¤æŒ‰é’®çš„loadingçŠ¶æ€
        const btn = card.querySelector('.card-btn');
        if (btn) {
          btn.classList.remove('loading');
          // æ¢å¤æŒ‰é’®åŸå§‹æ–‡å­—
          const originalText = btn.dataset.originalText || 'é€²å…¥';
          btn.textContent = originalText;
        }
      });
      
      console.log('å·²æ¸…é™¤æ‰€æœ‰loadingçŠ¶æ€');
    }
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      // æ¸…é™¤æ‰€æœ‰loadingçŠ¶æ€ - è§£å†³ä»å­ç³»ç»Ÿè¿”å›åä»æ˜¾ç¤ºè½½å…¥ä¸­çš„é—®é¢˜
      clearAllLoadingStates();
      
      initTheme(); // åˆå§‹åŒ–ä¸»é¡Œç³»çµ±
      
      loadSubsystemsData(); // è¼‰å…¥å­ç³»çµ±æ•¸æ“š
      renderSubsystems();
      
      // å»¶é²é è¼‰å…¥ä»¥æå‡åˆå§‹è¼‰å…¥é€Ÿåº¦
      setTimeout(() => {
        preloadAllSubsystems();
      }, 3000);
      
      // å»¶é²å‹•ç•«å„ªåŒ–
      setTimeout(() => {
        optimizeAnimations();
      }, 5000);
      
      // æ·»åŠ äº‹ä»¶å§”è¨—è™•ç†å¡ç‰‡é»æ“Š - å„ªåŒ–ç‰ˆæœ¬
      document.getElementById('subsystems').addEventListener('click', function(e) {
        const card = e.target.closest('.card');
        if (card && card.dataset.url) {
          if (e.target.classList.contains('card-btn')) {
            smoothNavigateToSubsystem(card, card.dataset.url);
          }
        }
      });
      

      
      // æ·»åŠ å³æ™‚åŒæ­¥æ©Ÿåˆ¶
      window.addEventListener('storage', function(e) {
        if (e.key === 'subsystems') {
          console.log('æª¢æ¸¬åˆ°å­ç³»çµ±æ•¸æ“šè®Šæ›´ï¼Œé‡æ–°è¼‰å…¥...');
          loadSubsystemsData();
          renderSubsystems();
          updateScrollbarVisibility();
        }
      });
      
      // æ·»åŠ æœç´¢åŠŸèƒ½ï¼ˆé˜²æŠ–å„ªåŒ–ï¼‰- å·²éš±è—
      const searchInput = document.getElementById('searchInput');
      if (searchInput) {
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(() => {
            filterBySearch(e.target.value);
          }, 300); // 300ms é˜²æŠ–
        });
      }
      
      // æ·»åŠ å¿«æ·éµæ”¯æ´ï¼ˆç°¡åŒ–ç‰ˆæœ¬ï¼‰
      document.addEventListener('keydown', (e) => {
        // ä¸»é¡Œåˆ‡æ›å¿«æ·éµ (Ctrl/Cmd + T)
        if ((e.ctrlKey || e.metaKey) && e.key === 't') {
          e.preventDefault();
          toggleTheme();
          console.log('å·²åˆ‡æ›ä¸»é¡Œ');
        }
      });
      
      // æ¨é€é€šçŸ¥åŠŸèƒ½ - åªåœ¨æ”¯æ´çš„ç’°å¢ƒä¸‹å•Ÿç”¨
      if ('Notification' in window) {
        requestNotificationPermission();
      }
      
      // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶æ¸…é™¤loadingçŠ¶æ€
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
          // é¡µé¢å˜ä¸ºå¯è§æ—¶ï¼Œæ¸…é™¤æ‰€æœ‰loadingçŠ¶æ€
          clearAllLoadingStates();
          updateScrollbarVisibility();
        }
      });
      
    // é¡¯ç¤ºæ§åˆ¶åŠŸèƒ½ - å·²ç°¡åŒ–ï¼ˆç›´æ¥é¡¯ç¤ºæ‰€æœ‰å­ç³»çµ±ï¼‰
    
    // æ€§èƒ½ç›£æ§
    if ('performance' in window) {
      window.addEventListener('load', () => {
        const loadTime = performance.now();
        console.log(`é é¢è¼‰å…¥æ™‚é–“: ${loadTime.toFixed(2)}ms`);
        
        // ç›£æ§è³‡æºè¼‰å…¥
        const resources = performance.getEntriesByType('resource');
        const slowResources = resources.filter(r => r.duration > 1000);
        if (slowResources.length > 0) {
          console.warn('æ…¢é€Ÿè³‡æº:', slowResources);
        }
        // é¦–æ¬¡è¼‰å…¥å¾Œæª¢æŸ¥æ»¾å‹•æ¢ï¼ˆå¤šæ¬¡å‘¼å«é¿å…å­—é«”/åœ–ç‰‡å»¶é²ï¼‰
        updateScrollbarVisibility();
        setTimeout(updateScrollbarVisibility, 150);
        setTimeout(updateScrollbarVisibility, 400);
      });
    }
      
      // æ·»åŠ å…¨å±€éŒ¯èª¤è™•ç†
      window.addEventListener('error', (e) => {
        console.error('æ‡‰ç”¨éŒ¯èª¤:', e.error);
        // å¯ä»¥ç™¼é€åˆ°éŒ¯èª¤è¿½è¹¤æœå‹™
      });
      
      window.addEventListener('unhandledrejection', (e) => {
        console.error('æœªè™•ç†çš„ Promise æ‹’çµ•:', e.reason);
        e.preventDefault();
      });
    });

    // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal')) {
        e.target.classList.remove('active');
      }
    });

    // é †æš¢è·³è½‰åŠŸèƒ½ - ç´”HTMLç‰ˆæœ¬
    function smoothNavigateToSubsystem(card, url) {
      // é˜²æ­¢é‡è¤‡é»æ“Š
      if (card.classList.contains('loading')) {
        return;
      }
      
      // æ·»åŠ è¼‰å…¥ç‹€æ…‹
      card.classList.add('loading');
      const btn = card.querySelector('.card-btn');
      if (btn) {
        // ä¿å­˜åŸå§‹æ–‡å­—
        if (!btn.dataset.originalText) {
          btn.dataset.originalText = btn.textContent;
        }
        btn.classList.add('loading');
        btn.textContent = 'è¼‰å…¥ä¸­...';
      }
      
      // ä½¿ç”¨ requestAnimationFrame å„ªåŒ–å‹•ç•«æ€§èƒ½
      requestAnimationFrame(() => {
        card.style.transform = 'scale(0.95)';
      });
      
      // æ¸›å°‘å»¶é²æ™‚é–“ï¼Œæå‡éŸ¿æ‡‰é€Ÿåº¦
      setTimeout(() => {
        try {
          console.log('æ‰“é–‹å­ç³»çµ±:', url);
          
          // ç›´æ¥è·³è½‰åˆ°å­ç³»çµ±
          window.location.href = url;
        } catch (error) {
          console.error('è·³è½‰å¤±æ•—:', error);
          showNavigationFeedback(card, 'error');
        }
      }, 150);
    }
    
    // é¡¯ç¤ºè·³è½‰åé¥‹ - å„ªåŒ–ç‰ˆæœ¬
    function showNavigationFeedback(card, type) {
      // ç§»é™¤è¼‰å…¥ç‹€æ…‹
      card.classList.remove('loading');
      const btn = card.querySelector('.card-btn');
      if (btn) {
        btn.classList.remove('loading');
        // ä½¿ç”¨ä¿å­˜çš„åŸå§‹æ–‡å­—æˆ–é»˜è®¤æ–‡å­—
        const originalText = btn.dataset.originalText || 'é€²å…¥';
        btn.textContent = type === 'success' ? 'å·²æ‰“é–‹' : originalText;
      }
      
      // ä½¿ç”¨ requestAnimationFrame å„ªåŒ–å‹•ç•«æ€§èƒ½
      requestAnimationFrame(() => {
        if (type === 'success') {
          card.style.transform = 'scale(1.05)';
          card.style.boxShadow = '0 8px 25px rgba(34, 197, 94, 0.3)';
        } else {
          card.style.transform = 'scale(0.98)';
          card.style.boxShadow = '0 4px 15px rgba(239, 68, 68, 0.3)';
        }
        
        // ä½¿ç”¨æ›´çŸ­çš„å‹•ç•«æ™‚é–“
        setTimeout(() => {
          requestAnimationFrame(() => {
            card.style.transform = '';
            card.style.boxShadow = '';
          });
        }, 300); // æ¸›å°‘åˆ°300ms
      });
    }
    
    // é è¼‰å…¥å­ç³»çµ±é é¢
    function preloadSubsystem(url) {
      const link = document.createElement('link');
      link.rel = 'prefetch';
      link.href = url;
      document.head.appendChild(link);
    }
    
    // æ‰¹é‡é è¼‰å…¥æ‰€æœ‰å­ç³»çµ±
    function preloadAllSubsystems() {
      const subsystems = getSubsystemsForIndex(); // åªé è¼‰å…¥å¯è¦‹çš„å­ç³»çµ±
      subsystems.forEach(sys => {
        preloadSubsystem(sys.url);
      });
    }
    
    // å‹•ç•«æ€§èƒ½å„ªåŒ–
    function optimizeAnimations() {
      // ä½¿ç”¨ Intersection Observer å„ªåŒ–å‹•ç•«æ€§èƒ½
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.willChange = 'transform, opacity, box-shadow';
            } else {
              entry.target.style.willChange = 'auto';
            }
          });
        }, {
          threshold: 0.1
        });
        
        // è§€å¯Ÿæ‰€æœ‰å¡ç‰‡
        document.querySelectorAll('.card').forEach(card => {
          observer.observe(card);
        });
      }
    }
    
    // åˆ†é¡ç¯©é¸åŠŸèƒ½
    function getSubsystemsForIndex() {
      const savedData = localStorage.getItem('subsystems');
      if (savedData) {
        try {
          const parsed = JSON.parse(savedData);
          if (Array.isArray(parsed)) {
            // åªè¿”å›å¯è¦‹çš„å­ç³»çµ±
            return parsed.filter(sys => sys.visible !== false);
          }
        } catch (e) {}
      }
      // æ²’æœ‰å°±ç”¨é è¨­ï¼Œä¹Ÿè¦éæ¿¾éš±è—çš„
      return defaultSubsystems.filter(sys => sys.visible !== false);
    }
  </script>
  <script>
  window.addEventListener('storage', function(e) {
    if (e.key === 'subsystems') {
      // é‡æ–°è¼‰å…¥å­ç³»çµ±æ•¸æ“šä¸¦é‡æ–°æ¸²æŸ“ï¼Œè€Œä¸æ˜¯æ•´å€‹é é¢é‡è¼‰
      loadSubsystemsData();
      renderSubsystems();
      console.log('å­ç³»çµ±æ•¸æ“šå·²æ›´æ–°ï¼Œé‡æ–°æ¸²æŸ“å®Œæˆ');
    }
  });
  </script>
</body>
</html> 